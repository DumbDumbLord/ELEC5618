Class 1
Selected Class
Test Suite
Test Outcomes
Additional Classes
Bottom-Up Testing

Class 2
Selected Class
Test Suite
Test Outcomes
Additional Classes
Bottom-Up Testing

Class 3
Selected Class
Test Suite
Test Outcomes
Additional Classes
Bottom-Up Testing

Class 4

Selected Class

NodeMatcher.java

Directory:
freeplane/src/main/java/org/freeplane/features/explorer/NodeMatcher.java

Test Suite

(Testing directly on original code)
To get Test Coverage (using jacoco)

Add to freeplane/bulid.gradle

plugins {
  id 'jacoco'
}

Add to freeplane/freeplane/bulid.gradle
apply plugin: 'jacoco'

jacocoTestReport {
    dependsOn test // tests are required to run before generating the report
    reports {
        xml.required = false
        csv.required = false
        html.outputLocation = layout.buildDirectory.dir('jacocoHtml')
    }
}

test {
    finalizedBy jacocoTestReport
}

Test commands:
gradle test

Tests:
All test in different file here [code](./Class 4 files/NodeMatcherSpec.java)
(was place in freeplane/src/test/java/org/freeplane/features/explorer/NodeMatcherSpec.java)

matches() matches property of node to check if it matches node.

filterMatchingNodes() filters all matching nodes that has property

NodeMatcherBlank(): Test matches() with blank test string, in addition should test no_content enum

NodeMatcherAlias(): Test matches() with a node alias, in addition should test alias enum

NodeMatcherTextFullTrue1(): Test matches() with text that has double quotation marks.

NodeMatcherTextFullTrue2(): Test matches() with text that has single quotation marks.

NodeMatcherTextPartTrue1(): Test matches() with text that has double quotation marks and ellipsis.

NodeMatcherTextPartTrue2(): Test matches() with text that has single quotation marks and ellipsis.

NodeMatcherTextFullFalse(): Test matches() with text when text doesn’t match node

NodeMatcherInvalid(): Test matches() with invalid search string

NodeMatcherCounterMatch(): Test matches() with counter, will return error as counter is used for filterMatchingNodes()

NodeMatcherList(): Test filterMatchingNodes() with text.

NodeMatcherCounter(): Test filterMatchingNodes() with counter, within node list range.

NodeMatcherCounterEmpty(): Test filterMatchingNodes() with counter, outside node list range.

Test Outcomes

[Test Coverage](./Class 4 files/class4TestCoverage.PNG)
(some branches are impossible while some are too minor and overlap)

[Test Result](./Class 4 files/class4TestResult.PNG)

Additional Classes

Command
(freeplane/src/main/java/org/freeplane/features/explorer/Command.java)

A Class which functions with ExploringStep to control operations of NodeMatcher. Calls NodeMatcher 

ExploringStep
(freeplane/src/main/java/org/freeplane/features/explorer/ExploringStep.java)

An Enum Class where its methods vary depending on its enum type. Calls NodeMatcher 

Bottom-Up Testing

(was place in freeplane/src/test/java/org/freeplane/features/explorer/Command.java)
[code](./Class 4 files/CommandSpec.java)

   @Test
    public void CommandChild() throws Exception {
        AccessedNodes accessedNodes = mock(AccessedNodes.class);
        NodeModel parent = new NodeModel("", null);

        parent.insert(new NodeModel("a", null));
        parent.insert(new NodeModel("b", null));
        parent.insert(new NodeModel("c", null));
        parent.insert(new NodeModel("d", null));

        Command command = new Command(ExploringStep.CHILD, "\'b\'", accessedNodes);

        assertEquals(command.getNodes(parent).toString(), "[b]");
    }

Code test dependency of NodeMatcher, Command and ExploringStep. Command creates NodeMatcher when it is created with search string “\’b\’”, while ExploringStep is type CHILD hence getNode (of ExploringStep) will search for the child nodes of the node selected when Command method getNodes is called. 

    @Test
    public void CommandDescendant() throws Exception {
        AccessedNodes accessedNodes = mock(AccessedNodes.class);
        NodeModel parent = new NodeModel("", null);

        parent.insert(new NodeModel("a", null));
        NodeModel node = new NodeModel("b", null);
        node.insert(new NodeModel("d", null));
        parent.insert(node);
        parent.insert(new NodeModel("c", null));

        Command command = new Command(ExploringStep.DESCENDANT, "\'d\'", accessedNodes);

        assertEquals(command.getNodes(parent).toString(), "[d]");
    }

Changed ExploringStep type to DESCENDANT hence will check descendants of nodes. This checks the descendant ‘d’ of ‘parent’ which is a child of ‘b’.

   @Test
    public void CommandAncestor() throws Exception {
        AccessedNodes accessedNodes = mock(AccessedNodes.class);
        NodeModel parent = new NodeModel("a", null);

        parent.insert(new NodeModel("e", null));
        NodeModel nodeB = new NodeModel("b", null);
        NodeModel nodeC = new NodeModel("c", null);
        nodeB.insert(nodeC);
        parent.insert(nodeB);
        parent.insert(new NodeModel("d", null));

        Command command = new Command(ExploringStep.ANCESTOR, "\'a\'", accessedNodes);

        assertEquals(command.getNodes(nodeC).toString(), "[a]");
    }

Changed ExploringStep type to ANCESTOR hence will check ancestors of the node. This code checks the ancestor of ‘c’, ‘a’.

    @Test
    public void CommandString() throws Exception {
        AccessedNodes accessedNodes = mock(AccessedNodes.class);

        Command command = new Command(ExploringStep.CHILD, "\'a\'", accessedNodes);

        assertEquals(command.toString(), "Command [operator=CHILD, searchedString='a']");
    }

Checked toString method of command showing its ExploringStep type and searchedString.

[Bottom Up Test Result](./Class 4 files/class4TestBottomUp.PNG)

Class 5
Selected Class
NodeStyleController.java
Directory:
freeplane/src/main/java/org/freeplane/features/nodestyle/NodeStyleController.java

Test Suite
Ensure dependencies are present in build.gradle (freeplane/freeplane/build.gradle):
testImplementation 'org.junit.jupiter:junit-jupiter:5.9.3'
testImplementation 'org.mockito:mockito-core:5.2.0'
testImplementation 'org.assertj:assertj-core:3.26.0'
test {
    useJUnitPlatform()
}
Place the test file at: freeplane/freeplane/src/test/java/org/freeplane/features/nodestyle/NodeStyleControllerTest.java
test {
    useJUnitPlatform() // Enable JUnit 5 platform support
}
testGetFont_UsesNodeStyleModelOverride: Verifies getFont prioritizes font attributes from the node's NodeStyleModel when present (mocked).
testGetFont_UsesAppliedStyleWhenNoOverride: Checks getFont uses attributes from the logical style (obtained via mocked LogicalStyleController) if no node override exists.
testGetFont_UsesDefaultWhenNoStyle: Ensures getFont returns the system default font when neither node nor style provides font information.
testGetColor_PrecedenceCheck: Verifies getColor correctly follows precedence: node's NodeStyleModel > applied style > default color.
testGetBackgroundColor_PrecedenceCheck: Similar test for getBackgroundColor.
testGetShapeConfiguration_PrecedenceCheck: Verifies getShapeConfiguration follows precedence: node's NodeStyleModel > applied style > default (AS_PARENT).
testGetMaxWidth_MinWidth_PrecedenceCheck: Verifies getMaxWidth/getMinWidth follows precedence: node's NodeSizeModel > applied style > default values.
testGetBorderProperties_PrecedenceCheck: Verifies retrieval for border properties (Color, Width, Dash, etc.) follows precedence: node's NodeBorderModel > applied style > defaults.
testIsBold_Italic_StrikedThrough_ComputedCorrectly: Checks boolean style methods return correct values based on the final computed font from various sources.

Test Outcomes
Ensure that all style-related methods work as expected.
Verify that styles are correctly applied, inherited, and persisted.
Confirm that invalid operations are handled gracefully.

Additional Classes
NodeModel.java (freeplane/src/main/java/org/freeplane/features/map/NodeModel.java)
Description: Holds node data and extensions (NodeStyleModel, etc.). In unit tests, it's mocked. In bottom-up tests, its state (and attached extensions) is verified after controller actions. Unit tested in Class 1.
NodeStyleModel.java (freeplane/src/main/java/org/freeplane/features/nodestyle/NodeStyleModel.java)
Description: Stores node-specific style overrides. Mocked in unit tests. State verified in bottom-up tests after actions from MNodeStyleController. Assumed unit-tested.
NodeSizeModel.java (freeplane/src/main/java/org/freeplane/features/nodestyle/NodeSizeModel.java)
Description: Stores node-specific size constraints. Mocked in unit tests. State verified in bottom-up tests. Assumed unit-tested.
NodeBorderModel.java (freeplane/src/main/java/org/freeplane/features/nodestyle/NodeBorderModel.java)
Description: Stores node-specific border properties. Mocked in unit tests. State verified in bottom-up tests. Assumed unit-tested.
MNodeStyleController.java (freeplane/src/main/java/org/freeplane/features/nodestyle/mindmapmode/MNodeStyleController.java)
Description: Subclass providing actions (setColor, setBold, etc.) that modify the style models. These actions are the focus of the bottom-up integration tests.

Bottom-Up Testing
File:freeplane/src/test/java/org/freeplane/features/nodestyle/NodeStyleModificationIntegrationTest.java

import org.freeplane.features.map.NodeModel;
import org.freeplane.features.nodestyle.NodeStyleModel;
import org.freeplane.features.nodestyle.NodeSizeModel;
import org.freeplane.features.nodestyle.NodeBorderModel;
import org.freeplane.features.nodestyle.mindmapmode.MNodeStyleController;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class NodeStyleModificationIntegrationTest {

    @Test
    public void testSetStyle() {
        // Initialize lower-level class
        NodeModel node = new NodeModel("Test Node", null);
        NodeStyleModel style = new NodeStyleModel();
        style.setFontFamily("Arial");
        style.setFontSize(14);

        // Use MNodeStyleController to modify style
        MNodeStyleController controller = new MNodeStyleController(null);
        controller.setNodeStyle(node, style);

        // Verify interaction and state
        assertEquals(style, NodeStyleModel.getNodeStyle(node));
        assertEquals("Arial", NodeStyleModel.getFontFamily(node));
        assertEquals(14, NodeStyleModel.getFontSize(node));
    }

    @Test
    public void testRemoveStyle() {
        // Initialize with a style
        NodeModel node = new NodeModel("Test Node", null);
        NodeStyleModel style = new NodeStyleModel();
        style.setFontFamily("Arial");
        MNodeStyleController controller = new MNodeStyleController(null);
        controller.setNodeStyle(node, style);

        // Remove style and verify
        controller.setNodeStyle(node, null);
        assertNull(NodeStyleModel.getNodeStyle(node));
    }

    @Test
    public void testApplyStyleToChildren() {
        // Create parent-child hierarchy
        NodeModel parent = new NodeModel("Parent", null);
        NodeModel child = new NodeModel("Child", null);
        parent.insert(child);

        // Apply style to parent
        NodeStyleModel style = new NodeStyleModel();
        style.setFontFamily("Helvetica");
        style.setFontSize(12);
        MNodeStyleController controller = new MNodeStyleController(null);
        controller.setNodeStyle(parent, style);

        // Propagate style to children
        controller.copyStyleToChildren(parent);

        // Verify child inherited style
        assertEquals("Helvetica", NodeStyleModel.getFontFamily(child));
        assertEquals(12, NodeStyleModel.getFontSize(child));
    }

    @Test
    public void testSetBorderProperties() {
        // Initialize node and border model
        NodeModel node = new NodeModel("Test Node", null);
        NodeBorderModel border = new NodeBorderModel();
        border.setBorderWidth(2);
        border.setBorderColor(Color.RED);

        // Use MNodeStyleController to set border
        MNodeStyleController controller = new MNodeStyleController(null);
        controller.setBorderModel(node, border);

        // Verify interaction and state
        assertEquals(2, NodeBorderModel.getBorderWidth(node));
        assertEquals(Color.RED, NodeBorderModel.getBorderColor(node));
    }

    @Test
    public void testSetSizeConstraints() {
        // Initialize node and size model
        NodeModel node = new NodeModel("Test Node", null);
        NodeSizeModel size = new NodeSizeModel();
        size.setMaxNodeWidth(200);
        size.setMinNodeWidth(50);

        // Use MNodeStyleController to set size
        MNodeStyleController controller = new MNodeStyleController(null);
        controller.setNodeSizeModel(node, size);

        // Verify interaction and state
        assertEquals(200, NodeSizeModel.getMaxNodeWidth(node));
        assertEquals(50, NodeSizeModel.getMinNodeWidth(node));
    }
}

